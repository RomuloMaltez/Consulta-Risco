<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consulta CNAE - Grau de Risco | Porto Velho/RO</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #1e293b;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            animation: fadeIn 0.6s ease-out;
        }

        .header h1 {
            font-size: clamp(1.5rem, 5vw, 2.5rem);
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            opacity: 0.95;
        }

        .search-card {
            background: white;
            border-radius: 20px;
            padding: clamp(20px, 5vw, 40px);
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            margin-bottom: 30px;
            animation: slideUp 0.6s ease-out;
        }

        .search-box {
            position: relative;
            margin-bottom: 20px;
        }

        .search-icon {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #94a3b8;
            font-size: 1.5rem;
        }

        #searchInput {
            width: 100%;
            padding: 18px 20px 18px 60px;
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            transition: all 0.3s;
            font-family: inherit;
        }

        #searchInput:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }

        .search-hint {
            color: #64748b;
            font-size: clamp(0.75rem, 1.8vw, 0.9rem);
            margin-top: 10px;
        }

        .info-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .info-card {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .info-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .info-card.baixo { border-color: #10B981; }
        .info-card.medio { border-color: #F59E0B; }
        .info-card.alto { border-color: #DC2626; }

        .info-card .icon {
            font-size: 3rem;
            margin-bottom: 10px;
        }

        .info-card h3 {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .info-card .count {
            font-size: 2rem;
            font-weight: 700;
            margin: 10px 0;
        }

        .info-card.baixo .count { color: #10B981; }
        .info-card.medio .count { color: #F59E0B; }
        .info-card.alto .count { color: #DC2626; }

        #results {
            margin-top: 30px;
        }

        .result-item {
            background: white;
            padding: clamp(20px, 4vw, 30px);
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            animation: fadeIn 0.4s ease-out;
            border-left: 6px solid;
        }

        .result-item.baixo { border-left-color: #10B981; }
        .result-item.medio { border-left-color: #F59E0B; }
        .result-item.alto { border-left-color: #DC2626; }

        .result-cnae {
            font-family: 'Courier New', monospace;
            font-size: clamp(1.1rem, 2.5vw, 1.4rem);
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 10px;
        }

        .result-atividade {
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            color: #475569;
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .result-badge {
            display: inline-block;
            padding: 8px 20px;
            border-radius: 25px;
            font-weight: 600;
            font-size: clamp(0.85rem, 1.8vw, 1rem);
            color: white;
        }

        .result-badge.baixo {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
        }

        .result-badge.medio {
            background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
        }

        .result-badge.alto {
            background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%);
        }

        .result-info {
            margin-top: 15px;
            padding: 15px;
            background: #f8fafc;
            border-radius: 10px;
            font-size: clamp(0.85rem, 1.8vw, 0.95rem);
            line-height: 1.6;
        }

        .no-results {
            text-align: center;
            padding: 60px 20px;
            color: white;
            font-size: clamp(1rem, 2vw, 1.2rem);
        }

        .footer {
            text-align: center;
            color: white;
            margin-top: 40px;
            padding: 20px;
            font-size: clamp(0.8rem, 1.8vw, 0.9rem);
            opacity: 0.9;
        }

        .print-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            margin-top: 15px;
            transition: all 0.3s;
        }

        .print-btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(30px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media print {
            body {
                background: white;
                padding: 20px;
            }
            .search-card, .info-cards, .footer, .print-btn {
                display: none;
            }
            .result-item {
                page-break-inside: avoid;
                box-shadow: none;
                border: 1px solid #e2e8f0;
            }
        }

        mark {
            background-color: #fef08a;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: 600;
        }

        .result-count {
            text-align: center;
            color: white;
            font-size: 1.1rem;
            margin-bottom: 20px;
            font-weight: 600;
        }

        /* Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            animation: fadeIn 0.3s ease-out;
            overflow-y: auto;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: clamp(25px, 5vw, 40px);
            max-width: 600px;
            width: 100%;
            position: relative;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.4s ease-out;
            max-height: 85vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e2e8f0;
        }

        .modal-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: clamp(1.3rem, 3vw, 1.8rem);
            font-weight: 700;
            color: #1e293b;
        }

        .modal-close {
            background: #f1f5f9;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            color: #64748b;
        }

        .modal-close:hover {
            background: #e2e8f0;
            transform: rotate(90deg);
        }

        .modal-body {
            color: #475569;
            line-height: 1.8;
        }

        .modal-section {
            margin-bottom: 25px;
        }

        .modal-section h3 {
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            color: #1e293b;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .modal-section ul {
            list-style: none;
            padding-left: 0;
        }

        .modal-section li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
            font-size: clamp(0.9rem, 2vw, 1rem);
        }

        .modal-section li:before {
            content: "•";
            position: absolute;
            left: 8px;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .modal-badge {
            display: inline-block;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            font-size: clamp(0.9rem, 2vw, 1rem);
            color: white;
            margin-bottom: 20px;
        }

        .modal-badge.baixo {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
        }

        .modal-badge.medio {
            background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
        }

        .modal-badge.alto {
            background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%);
        }

        .info-card {
            cursor: pointer;
        }

        .info-card:active {
            transform: translateY(-3px) scale(0.98);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📋 Consulta CNAE - Grau de Risco</h1>
            <p>Município de Porto Velho/RO</p>
        </div>

        <div class="search-card">
            <div class="info-cards">
                <div class="info-card baixo" onclick="abrirModal('baixo')">
                    <div class="icon">🟢</div>
                    <h3>Baixo Risco</h3>
                    <div class="count">526</div>
                    <small>Dispensadas de licenciamento</small>
                </div>
                <div class="info-card medio" onclick="abrirModal('medio')">
                    <div class="icon">🟡</div>
                    <h3>Médio Risco</h3>
                    <div class="count">394</div>
                    <small>Alvará provisório imediato</small>
                </div>
                <div class="info-card alto" onclick="abrirModal('alto')">
                    <div class="icon">🔴</div>
                    <h3>Alto Risco</h3>
                    <div class="count">415</div>
                    <small>Licença prévia obrigatória</small>
                </div>
            </div>
        </div>

        <div class="search-card" style="margin-top: 20px;">
            <div class="search-box">
                <span class="search-icon">🔍</span>
                <input 
                    type="text" 
                    id="searchInput" 
                    placeholder="Digite o código CNAE ou nome da atividade..."
                    autocomplete="off"
                >
            </div>
            <div class="search-hint">
                💡 Exemplos: "8630-5/02", "padaria", "médica", "construção"
            </div>
        </div>

        <div id="resultCount" class="result-count"></div>
        <div id="results"></div>

        <div class="footer">
            <p><strong>Sistema de Consulta CNAE</strong></p>
            <p>Porto Velho/RO • 2025</p>
            <p style="margin-top: 10px; font-size: 0.85em;">
                ⚠️ Este sistema tem caráter informativo. Para informações oficiais, consulte os órgãos competentes.
            </p>
        </div>

        <!-- Modal -->
        <div class="modal-overlay" id="modalOverlay" onclick="fecharModal(event)">
            <div class="modal-content" onclick="event.stopPropagation()">
                <div class="modal-header">
                    <div class="modal-title" id="modalTitle"></div>
                    <button class="modal-close" onclick="fecharModal()">✕</button>
                </div>
                <div class="modal-body" id="modalBody"></div>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // DADOS DE ALTO RISCO (415 ATIVIDADES)
        // Formato: CNAE|Atividade
        // ============================================
        const DADOS_ALTO_RISCO = `1012-1/01|Abate de aves
1012-1/02|Abate de pequenos animais
5590-6/01|Albergues, exceto assistenciais
1340-5/02|Alvejamento, tingimento e torção em fios, tecidos, artefatos têxteis e peças do vestuário
8630-5/02|Atividade médica ambulatorial com recursos para realização de exames complementares
8630-5/01|Atividade médica ambulatorial com recursos para realização de procedimentos cirúrgicos
8690-9/03|Atividades de acupuntura
0990-4/02|Atividades de apoio à extração de minerais metálicos Não-ferrosos
0990-4/03|Atividades de apoio à extração de minerais Não-metálicos
0990-4/01|Atividades de apoio à extração de minério de ferro
0910-6/00|Atividades de apoio à extração de petróleo e gás natural
0311-6/04|Atividades de apoio à pesca em água salgada
8711-5/03|Atividades de assistência a deficientes físicos, imunodeprimidos e convalescentes
8730-1/99|Atividades de assistência social prestadas em residências coletivas e particulares não especificadas anteriormente
8630-5/99|Atividades de atenção ambulatorial não especificadas anteriormente
8610-1/02|Atividades de atendimento em pronto-socorro e unidades hospitalares para atendimento a urgências
8610-1/01|Atividades de atendimento hospitalar, exceto prontosocorro e unidades para atendimento a urgências
8690-9/02|Atividades de bancos de leite humano
3511-5/02|Atividades de coordenação e controle da operação da geração e transmissão de energia elétrica
8650-0/01|Atividades de enfermagem
9602-5/02|Atividades de estética e outros serviços de cuidados com a beleza
8712-3/00|Atividades de fornecimento de infra-estrutura de apoio e assistência a paciente no domicílio
8690-9/04|Atividades de podologia
8690-9/01|Atividades de práticas integrativas e complementares em saúde humana
8650-0/99|Atividades de profissionais da área de saúde não especificadas anteriormente
8630-5/07|Atividades de reprodução humana assistida
8640-2/99|Atividades de serviços de complementação diagnóstica e terapêutica não especificadas anteriormente
5231-1/02|Atividades do Operador Portuário
9603-3/99|Atividades funerárias e serviços relacionados não especificados anteriormente
3702-9/00|Atividades relacionadas a esgoto, exceto a gestão de redes`.split('\n');
        // ⚠️ ADICIONE AQUI AS DEMAIS 385 ATIVIDADES DE ALTO RISCO

        // ============================================
        // DADOS DE MÉDIO RISCO (394 ATIVIDADES)
        // Formato: CNAE|Atividade
        // ============================================
        const DADOS_MEDIO_RISCO = `0119-9/05|Cultivo de feijão
0151-2/02|Criação de bovinos para leite
0152-1/02|Criação de eqüinos
0152-1/03|Criação de asininos e muares
0153-9/01|Criação de caprinos
0153-9/02|Criação de ovinos, inclusive para produção de lã
0154-7/00|Criação de suínos
0155-5/01|Criação de frangos para corte
0155-5/02|Produção de pintos de um dia
0155-5/03|Criação de outros galináceos, exceto para corte
0155-5/04|Criação de aves, exceto galináceos
0159-8/01|Apicultura`.split('\n');
5231-1/01|Administração da infra-estrutura portuária


        // ============================================
        // DADOS DE BAIXO RISCO (526 ATIVIDADES)
        // Formato: CNAE|Atividade
        // ============================================
        const DADOS_BAIXO_RISCO = `1531-9/02|Acabamento de calçados de couro sob contrato
6613-4/00|Administração de cartões de crédito
6493-0/00|Administração de consórcios para aquisição de bens e direitos
6611-8/04|Administração de mercados de balcão organizados
4399-1/01|Administração de obras
8411-6/00|Administração pública em geral
7312-2/00|Agenciamento de espaços para publicidade, exceto em veículos de comunicação
7490-1/05|Agenciamento de profissionais para atividades esportivas, culturais e artísticas
6434-4/00|Agências de fomento
6391-7/00|Agências de notícias
7311-4/00|Agências de publicidade
7911-2/00|Agências de viagens
9609-2/02|Agências matrimoniais
6911-7/03|Agente de propriedade industrial
6612-6/05|Agentes de investimentos em aplicações financeiras
7729-2/01|Aluguel de aparelhos de jogos eletrônicos
7721-7/00|Aluguel de equipamentos recreativos e esportivos
7722-5/00|Aluguel de fitas de vídeo, DVDs e similares
6810-2/02|Aluguel de imóveis próprios
7733-1/00|Aluguel de máquinas e equipamentos para escritório
7729-2/03|Aluguel de material médico
7729-2/02|Aluguel de móveis, utensílios e aparelhos de uso doméstico e pessoal; instrumentos musicais
7723-3/00|Aluguel de objetos do vestuário, jóias e acessórios
7729-2/99|Aluguel de outros objetos pessoais e domésticos não especificados anteriormente
4330-4/05|Aplicação de revestimentos e de resinas em interiores e exteriores
6440-9/00|Arrendamento mercantil
9001-9/99|Artes cênicas, espetáculos e atividades complementares não especificados anteriormente
6435-2/02|Associações de poupança e empréstimo
9499-5/00|Atividades associativas não especificadas anteriormente
6911-7/02|Atividades auxiliares da justiça`.split('\n');
        // ⚠️ ADICIONE AQUI AS DEMAIS 496 ATIVIDADES DE BAIXO RISCO

        // ============================================
        // FUNÇÃO PARA PROCESSAR OS DADOS
        // ============================================
        function parseData(dataArray) {
            return dataArray
                .filter(line => line.trim() !== '')
                .map(line => {
                    const [cnae, atividade] = line.split('|');
                    return { 
                        cnae: cnae.trim(), 
                        atividade: atividade.trim() 
                    };
                });
        }

        const altoRisco = parseData(DADOS_ALTO_RISCO);
        const medioRisco = parseData(DADOS_MEDIO_RISCO);
        const baixoRisco = parseData(DADOS_BAIXO_RISCO);

        // ============================================
        // FUNÇÕES DE BUSCA E EXIBIÇÃO
        // ============================================
        function normalizarTexto(texto) {
            return texto.toLowerCase()
                .normalize('NFD')
                .replace(/[\u0300-\u036f]/g, '');
        }

        function destacarTexto(texto, termo) {
            if (!termo) return texto;
            const regex = new RegExp(`(${termo})`, 'gi');
            return texto.replace(regex, '<mark>$1</mark>');
        }

        function buscar(termo) {
            if (!termo || termo.length < 2) {
                document.getElementById('results').innerHTML = '';
                document.getElementById('resultCount').innerHTML = '';
                return;
            }

            const termoNorm = normalizarTexto(termo);
            const resultados = [];

            // Busca em alto risco
            altoRisco.forEach(item => {
                const cnaeMatch = normalizarTexto(item.cnae).includes(termoNorm);
                const atividadeMatch = normalizarTexto(item.atividade).includes(termoNorm);
                
                if (cnaeMatch || atividadeMatch) {
                    resultados.push({ ...item, risco: 'alto' });
                }
            });

            // Busca em médio risco
            medioRisco.forEach(item => {
                const cnaeMatch = normalizarTexto(item.cnae).includes(termoNorm);
                const atividadeMatch = normalizarTexto(item.atividade).includes(termoNorm);
                
                if (cnaeMatch || atividadeMatch) {
                    resultados.push({ ...item, risco: 'medio' });
                }
            });

            // Busca em baixo risco
            baixoRisco.forEach(item => {
                const cnaeMatch = normalizarTexto(item.cnae).includes(termoNorm);
                const atividadeMatch = normalizarTexto(item.atividade).includes(termoNorm);
                
                if (cnaeMatch || atividadeMatch) {
                    resultados.push({ ...item, risco: 'baixo' });
                }
            });

            exibirResultados(resultados, termo);
        }

        function exibirResultados(resultados, termo) {
            const resultsDiv = document.getElementById('results');
            const countDiv = document.getElementById('resultCount');

            if (resultados.length === 0) {
                countDiv.innerHTML = '';
                resultsDiv.innerHTML = '<div class="no-results">😕 Nenhum resultado encontrado.<br>Tente buscar por outro termo ou código CNAE.</div>';
                return;
            }

            countDiv.innerHTML = `✨ ${resultados.length} resultado${resultados.length > 1 ? 's' : ''} encontrado${resultados.length > 1 ? 's' : ''}`;

            const html = resultados.map(item => {
                const infoRisco = obterInfoRisco(item.risco);
                
                return `
                    <div class="result-item ${item.risco}">
                        <div class="result-cnae">CNAE: ${destacarTexto(item.cnae, termo)}</div>
                        <div class="result-atividade">${destacarTexto(item.atividade, termo)}</div>
                        <span class="result-badge ${item.risco}">${infoRisco.titulo}</span>
                        <div class="result-info">
                            <strong>${infoRisco.significado}</strong><br><br>
                            ${infoRisco.detalhes}
                        </div>
                        <button class="print-btn" onclick="window.print()">🖨️ Imprimir Resultado</button>
                    </div>
                `;
            }).join('');

            resultsDiv.innerHTML = html;
        }

        function obterInfoRisco(risco) {
            if (risco === 'alto') {
                return {
                    titulo: '🔴 ALTO RISCO - Licença Prévia Obrigatória',
                    significado: 'O que isso significa?',
                    detalhes: `Para atividades de <strong>ALTO RISCO</strong>, você precisa:<br>
                    ✓ Obter licença ANTES de iniciar as atividades<br>
                    ✓ Passar por vistorias técnicas dos órgãos competentes<br>
                    ✓ Atender requisitos específicos de segurança, meio ambiente e vigilância sanitária<br>
                    ✓ Aguardar aprovação formal para começar a funcionar`
                };
            } else if (risco === 'baixo') {
                return {
                    titulo: '🟢 BAIXO RISCO - Dispensado de Licenciamento',
                    significado: 'O que isso significa?',
                    detalhes: `Para atividades de <strong>BAIXO RISCO</strong>:<br>
                    ✓ Você está DISPENSADO de licenciamento prévio<br>
                    ✓ Pode iniciar as atividades imediatamente após registro<br>
                    ✓ Não necessita de vistorias técnicas iniciais<br>
                    ✓ Processo simplificado de abertura`
                };
            } else {
                return {
                    titulo: '🟡 MÉDIO RISCO - Alvará Provisório',
                    significado: 'O que isso significa?',
                    detalhes: `Para atividades de <strong>MÉDIO RISCO</strong>:<br>
                    ✓ Você recebe um alvará provisório de IMEDIATO<br>
                    ✓ Pode iniciar as atividades enquanto aguarda vistoria<br>
                    ✓ Vistorias serão realizadas posteriormente<br>
                    ✓ Deve atender normas específicas de sua atividade`
                };
            }
        }

        // Event listener para busca em tempo real
        const searchInput = document.getElementById('searchInput');
        let timeoutId;

        searchInput.addEventListener('input', (e) => {
            clearTimeout(timeoutId);
            timeoutId = setTimeout(() => {
                buscar(e.target.value);
            }, 300);
        });

        // Focus no input ao carregar
        searchInput.focus();

        // ============================================
        // MODAL - INFORMAÇÕES DETALHADAS POR RISCO
        // ============================================
        
        const informacoesRisco = {
            baixo: {
                titulo: '🟢 BAIXO RISCO',
                badge: 'Dispensado de Licenciamento',
                secoes: [
                    {
                        titulo: '📋 O que isso significa:',
                        itens: [
                            'Dispensado de licenciamento prévio',
                            'Não exige vistoria inicial',
                            'Registro simplificado na Junta Comercial',
                            'Certidão de Dispensa emitida automaticamente',
                            'Processo de abertura ágil e desburocratizado'
                        ]
                    },
                    {
                        titulo: '⏱️ Prazos e Custos:',
                        itens: [
                            'Prazo: Imediato após registro',
                            'Custo: Taxas de registro da JUCER, taxa Bombeiro e TFFR do município,',
                            'Sem necessidade de aguardar aprovações'
                        ]
                    },
                    {
                        titulo: '📄 Documentos ou ações necessários:',
                        itens: [
                            'Consulta prévia de viabilidade aprovada',
                            'Obtenção da inscrição municipal',
                            'Credenciamento para emissão de NFS-e',
                            'Credenciamento ao Domicílio Trubutário Eletrônico (DTEL)'
                        ]
                    },
                    {
                        titulo: '⚖️ Legislação aplicável:',
                        itens: [
                            'Lei Municipal nº 906/2022, 873/2022, 138/2001, 1.562/2003 ',
                            'Decreto Municipal nº 19.577/2023, 16.482/2019',
                            'Lei Federal nº 11.598/2007 (Redesim)'
                        ]
                    }
                ]
            },
            medio: {
                titulo: '🟡 MÉDIO RISCO',
                badge: 'Alvará Provisório',
                secoes: [
                    {
                        titulo: '📋 O que isso significa:',
                        itens: [
                            'Alvará provisório emitido imediatamente',
                            'Pode iniciar atividades no ato do registro',
                            'Vistoria realizada em até 180 dias',
                            'Deve atender normas sanitárias, ambientais e de segurança',
                            'Prazo para regularização completa: 180 dias'
                        ]
                    },
                    {
                        titulo: '⏱️ Prazos e Custos:',
                        itens: [
                            'Alvará provisório: Imediato',
                            'Vistoria: Até 180 dias após início',
                            'Regularização: Até 180 dias',
                            'Custo: Taxas de registro + de vistoria + de funcionamento + (ambiental e sanitária, se houve atividade) '
                        ]
                    },
                    {
                        titulo: '📄 Documentos ou ações necessários:',
                        itens: [
                            'Consulta prévia de viabilidade aprovada',
                            'Obtenção da inscrição municipal',
                            'Alvará do Corpo de Bombeiros',
                            'Alvará sanitário e ambiental (para algumas atividades)',
                            'Demais autorizações específicas (para algumas atividades)'
                        ]
                    },
                    {
                        titulo: '⚖️ Legislação aplicável:',
                        itens: [
                            'Lei Municipal nº 906/2022, 873/2022, 138/2001, 1.562/2003',
                            'Decreto Municipal nº 19.577/2023, 16.482/2019',
                            'Resoluções específicas por atividade'
                        ]
                    }
                ]
            },
            alto: {
                titulo: '🔴 ALTO RISCO',
                badge: 'Licença Prévia Obrigatória',
                secoes: [
                    {
                        titulo: '📋 O que isso significa:',
                        itens: [
                            'Licença prévia OBRIGATÓRIA antes de iniciar',
                            'NÃO pode funcionar antes da aprovação',
                            'Vistoria técnica prévia obrigatória',
                            'Laudos técnicos especializados necessários',
                            'Aprovação de múltiplos órgãos competentes'
                        ]
                    },
                    {
                        titulo: '⏱️ Prazos e Custos:',
                        itens: [
                            'Análise: Até 90 dias',
                            'Vistoria: Agendada após protocolo',
                            'Aprovação final: Após cumprimento de exigências',
                            'Custo: Taxas + laudos técnicos + adequações'
                        ]
                    },
                    {
                        titulo: '📄 Documentos necessários:',
                        itens: [
                            'Projeto completo de instalações',
                            'Laudo técnico de segurança',
                            'Licença ambiental (quando aplicável)',
                            'Licença da Vigilância Sanitária (quando aplicável)',
                            'Licença do Corpo de Bombeiros',
                            'Memorial descritivo das atividades',
                            'ART/RRT dos responsáveis técnicos'
                        ]
                    },
                    {
                        titulo: '⚖️ Legislação aplicável:',
                        itens: [
                            'Lei Municipal nº 906/2022, 873/2022, 138/2001, 1.562/2003',
                            'Decreto Municipal nº 19.577/2023, 16.482/2019',
                            'Portarias específicas da Vigilância Sanitária',
                            'Normas técnicas do Corpo de Bombeiros',
                            'Legislação ambiental aplicável'
                        ]
                    }
                ]
            }
        };

        function abrirModal(tipo) {
            const info = informacoesRisco[tipo];
            const modal = document.getElementById('modalOverlay');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');

            // Define título
            modalTitle.innerHTML = `<span>${info.titulo}</span>`;

            // Constrói o conteúdo
            let conteudo = `<div class="modal-badge ${tipo}">${info.badge}</div>`;
            
            info.secoes.forEach(secao => {
                conteudo += `
                    <div class="modal-section">
                        <h3>${secao.titulo}</h3>
                        <ul>
                            ${secao.itens.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                    </div>
                `;
            });

            modalBody.innerHTML = conteudo;
            modal.classList.add('active');
            document.body.style.overflow = 'hidden'; // Previne scroll do body
        }

        function fecharModal(event) {
            // Fecha apenas se clicar no overlay (fora do modal) ou no botão fechar
            if (!event || event.target.id === 'modalOverlay' || event.target.classList.contains('modal-close')) {
                const modal = document.getElementById('modalOverlay');
                modal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        }

        // Fechar modal com tecla ESC
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                fecharModal();
            }
        });

        // Log de verificação (pode remover depois)
        console.log('📊 Dados carregados:');
        console.log(`🔴 Alto Risco: ${altoRisco.length} atividades`);
        console.log(`🟡 Médio Risco: ${medioRisco.length} atividades`);
        console.log(`🟢 Baixo Risco: ${baixoRisco.length} atividades`);
        console.log(`📋 Total: ${altoRisco.length + medioRisco.length + baixoRisco.length} atividades`);
    </script>
</body>
</html>
